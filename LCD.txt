CODE SEGMENT
ASSUME CS:CODE, DS:CODE, SS:CODE, ES:CODE
ORG 1000H

IR_WR EQU 00H
ST_RD EQU 02H
DR_WR EQU 04H

CALL ALLCLR

CALL CUR1

MOV SI, OFFSET AB
CALL STR
X:
CALL DELAY
AB DB 'MIST', 00H

ALLCLR:
MOV AH, 01H
JMP OUT

CUR1:
MOV AH, 085H

OUT:
CALL BUSY
MOV AL, AH
OUT 00H, AL
RET

BUSY:
MOV DX, ST_RD
IN AL, DX
TEST AL, 80H
JNZ BUSY
RET

STR:
MOV AH, CS:[SI]
CMP AH, 00H
JE RETURN

CALL BUSY
MOV AL, AH
MOV DX, DR_WR
OUT DX, AL
INC SI
JMP STR

RETURN:
RET

DELAY:
MOV CX, 0FFFFH
F:
DEC CX
JNZ F
JMP X

CODE ENDS
END